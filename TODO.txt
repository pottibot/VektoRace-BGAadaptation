
ZOMBIE SYSTEM FIX:
- [t] if first positioning player quits, third player will move next


BUG and FIXES:
- margin error on dot product and attack validity
- better zoom interval
- reduce controls of curve progression (since a new offtrack system is implemented)
- stop mouse wheel on interactable elements
- [v] test zombie car removal after new fix (also: can a zombie come back into the game?)
  - zombie still produce errors (where, when, how?)
- add tooltip to pitstop
- attack moves displays only if player behind botton (no move can be valid else)
- firefox cutting sprites not pretty
- markup in tooltips (?)
- translation tire tokens or tire points
- player can cross finish line diagonally (cannot check for direction after without preventing rotation after)
- gear vector not being destroyed after animation end (happens only if browser is not active, only chrome? fixed?)
- dropshadow make safari crash? (doesn't seem like, but map not loading instead)

ADDITIONAL FEATURES:
- add vector preview to inactive player too
- new box image
- leave game when race is finished
- wider first positioning area
- circuit layout combinations for different laps -> highlight track layout on bottom left of map for each player 
- change cursor for moves not allowed
- better notification for no attack reason
- more and better tooltips
- add statistics resources left
- add statistic initial positition
- add background
- endgame race replay
- custom initial order (for tournaments and consecutive games)
- tournament based on thinking time?
- scroll map to new events option?
- offtrack penality?
- volountary penality?
- emergency brake visuals that show each invalid vector?

POSSIBLE CODE RESTRUCT:
- could move offtrack check and other position validity checks on action handler. position will seem valid in UI but server will throw exception.
  this makes arg method simpler and also UI less confusing on why certain position are not valid. only blocked position will be those colliding and those denied by shunk
- unified skip action?
- car pos legal checks overhaul(?)
- token selection auto fill redo(?)

PRODUCTION BUGS:
http://boardgamearena.com/2/vektorace?table=239093203
20/02 07:31:37 [error] [T239093203] [62.11.174.19] [45352871/emmepi14] Unexpected exception: Cannot detect collision with invalid or unidentified object
#0 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1901): VektoRace->detectCollision()
#1 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1726): VektoRace->argCarPlacement()
#2 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(667): VektoRace->argGearVectorPlacement()
#3 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(130): Gamestate->loadStateArgs()
#4 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/table.game.php(177): Gamestate->state()
#5 /var/tournoi/release/tournoi-220215-1000-gs/www/view/common/game.view.php(476): Table->getAllTableDatas()
#6 /var/tournoi/release/tournoi-220215-1000-gs/www/view/common/game.view.php(395): game_view->post_generate()
#7 /var/tournoi/release/tournoi-220215-1000-gs/www/view/common/ebg.view.php(23): game_view->generate_content()
#8 /var/tournoi/release/tournoi-220215-1000-gs/www/include/webActionCore.inc.php(286): ebg_view->generate()
#9 /var/tournoi/release/tournoi-220215-1000-gs/www/index.php(259): launchWebAction()
#10 {main}

http://boardgamearena.com/2/vektorace/vektorace/declareGear.html?gearN=5&lock=54ef2707-df5b-46bb-8721-219999a58e03&table=244393008&dojo.preventCache=1645481796727
21/02 23:19:05 [error] [T244393008] [95.232.160.246] [88781045/LeilahRicah] Unexpected exception: Error : call to getUniqueValueFromDB resulted in an resultset with more than one row for the following query : 
SELECT player_id
                FROM player
                WHERE player_turn_position = 3 (BGA service error 1645481945)
#0 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(550): APP_DbObject::getUniqueValueFromDB()
#1 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1713): VektoRace->getPlayerTurnPosNumber()
#2 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(667): VektoRace->argGearVectorPlacement()
#3 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(130): Gamestate->loadStateArgs()
#4 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(426): Gamestate->state()
#5 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(398): Gamestate->jumpToState()
#6 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(2631): Gamestate->nextState()
#7 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(502): VektoRace->stNextPlayer()
#8 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(398): Gamestate->jumpToState()
#9 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1074): Gamestate->nextState()
#10 /var/tournoi/release/games/vektorace/220218-1825/vektorace.action.php(77): VektoRace->declareGear()
#11 /var/tournoi/release/tournoi-220215-1000-gs/www/include/webActionCore.inc.php(189): action_vektorace->declareGear()
#12 /var/tournoi/release/tournoi-220215-1000-gs/www/index.php(259): launchWebAction()
#13 {main}

[Mon Feb 21 21:22:48.647356 2022] [php7:error] [pid 120334:tid PHP Fatal error:  Uncaught Exception: Function shouldn't have reached this point in /var/tournoi/release/games/vektorace/220218-1825/modules/VektoraceOctagon.php:149\nStack trace:\n
#0 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1888): VektoraceOctagon->getCurveZone()\n
#1 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(1726): VektoRace->argCarPlacement()\n
#2 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(667): VektoRace->argGearVectorPlacement()\n
#3 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(130): Gamestate->loadStateArgs()\n
#4 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(426): Gamestate->state()\n
#5 /var/tournoi/release/tournoi-220215-1000-gs/www/game/module/table/gamestate.game.php(398): Gamestate->jumpToState()\n
#6 /var/tournoi/release/games/vektorace/220218-1825/vektorace.game.php(2631): Gamestate->nextState()\n
#7 /var/tournoi/release/tournoi-220215-1000-gs/www/game/modul in /var/tournoi/release/games/vektorace/220218-1825/modules/VektoraceOctagon.php on line 149

NEW UPDATE NOTE:

new update has been uploaded. contains a bunch of fixes and small improvements:
- starting positioning area has been moved back in order to not give too much advantage to the first player for the first curve (as suggested by designers)
- fixed tire spending prediction when placing a gear vector (again, hopefully for the better now)
- fixed system that handles quitting players (again too. these errors are very hard to test)
- fixed rare curve progression error (again!!)
- removed wrong rule where the player couldn't spend tire tokens after performing an emergency brake
- changed boxbox promt so that it is asked every turn that the player is in the box entrance lane (this way the player can skip the action and eventually call boxbox on a later turn)
- fixed problems concerning car close proximity to an area or to overtaking an opponent in which the result would be wrong due to poor precision
- changed game box image to the 2nd edition one (which just recently got out!). it's more appropriate as the bga implementation ruleset refer to this new edition.

if this update goes well i migth move to beta soon (publisher already gave the ok)